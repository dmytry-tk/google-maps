{"version":3,"sources":["map.js","servers/servers.js","app.js","index.js"],"names":["require","compose","withProps","withState","withHandlers","MarkerClusterer","withScriptjs","withGoogleMap","GoogleMap","MarkerWithLabel","Marker","Map","googleMapURL","loadingElement","style","height","containerElement","mapElement","center","lat","lng","refs","map","undefined","onMapMounted","ref","onZoomChanged","onZoomChange","props","CustomMap","defaultCenter","zoom","options","minZoom","maxZoom","averageCenter","clusterClass","gridSize","videos","video","ind","marker","CustomMarker","useState","showLabel","setShowLabel","icon","url","UserPhoto","scaledSize","google","maps","Size","origin","Point","zIndex","onMouseOut","onMouseOver","defaultClickable","onClick","e","target","href","window","open","defaultDraggable","clickable","labelClass","position","labelAnchor","className","src","alt","category","likes","dislikes","pageUrl","views_count","createdHumanTiming","getVideos","a","method","headers","data","axios","res","App","setVideos","useEffect","then","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9782a1da.chunk.js","sourcesContent":["/* eslint-disable no-undef */\n\nimport React, {useEffect, useState} from \"react\";\n\nconst { compose, withProps, withState, withHandlers } = require(\"recompose\");\nconst { MarkerClusterer } = require(\"react-google-maps/lib/components/addons/MarkerClusterer\");\nconst {\n    withScriptjs,\n    withGoogleMap,\n    GoogleMap,\n    Marker\n} = require(\"react-google-maps\");\nconst { MarkerWithLabel } = require(\"react-google-maps/lib/components/addons/MarkerWithLabel\");\n\nconst getPixelPositionOffset = (width, height) => ({\n    x: -(width / 2),\n    y: -(height / 2),\n})\n\nexport const Map = compose(\n    withProps({\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyAWtOrr3OGWQ2i2IGWd3y8VnXRGmBvnUas\",\n        loadingElement: <div style={{ height: `100%` }} />,\n        containerElement: <div style={{ height: `80vh` }} />,\n        mapElement: <div style={{ height: `100%` }} />,\n        center: { lat: 25.03, lng: 121.6 },\n    }),\n    withState('zoom', 'onZoomChange', 13),\n    withHandlers(() => {\n        const refs = {\n            map: undefined,\n        }\n\n        return {\n            onMapMounted: () => ref => {\n                refs.map = ref\n            },\n            onZoomChanged: ({ onZoomChange }) => () => {\n\n                // console.log(refs.map)\n                // onZoomChange(refs.map.getZoom())\n                // console.log(refs.map.getCenter().lat())\n                // console.log(refs.map.getCenter().lng())\n                // console.log(refs.map.getBounds())\n            },\n        }\n    }),\n    withScriptjs,\n    withGoogleMap\n)(props => <CustomMap {...props}/>);\n\nexport const CustomMap = (props) => {\n    return (\n        <GoogleMap\n            defaultCenter={{ lat: -33.91075134, lng: 151.19416809 }}\n            zoom={props.zoom}\n            options={{\n                minZoom: 2,\n                maxZoom: 18\n            }}\n            ref={props.onMapMounted}\n            onZoomChanged={props.onZoomChanged}>\n            <MarkerClusterer\n                averageCenter\n                clusterClass={\"cluster-videos\"}\n                // enableRetinaIcons\n                gridSize={60}>\n                {\n                    props.videos.map((video, ind) => {\n                        return (\n                            <CustomMarker marker={video} key={ind}/>\n                        )\n                    })\n                }\n            </MarkerClusterer>\n        </GoogleMap>\n    )\n}\n\nexport const CustomMarker = ({marker}) => {\n\n    const [showLabel, setShowLabel] = useState(false);\n    const icon = {\n        url: marker.UserPhoto, // url\n        scaledSize: new google.maps.Size(40, 40), // scaled size\n        origin: new google.maps.Point(0, 0), // origin\n    };\n    return (\n        <>\n            <MarkerWithLabel\n                icon={icon}\n                zIndex={100}\n                onMouseOut={() => setShowLabel(false)}\n                onMouseOver={() => setShowLabel(true)}\n                defaultClickable={true}\n                onClick={(e) => e?.target?.href? window.open(e.target.href) : \"\"}\n                defaultDraggable={true}\n                clickable={true}\n                labelClass={`marker-label ${showLabel? \"active\" : \"\"}`}\n                position={{lat: +marker.lat, lng: +marker.lng}}\n                labelAnchor={new google.maps.Point(110, -10)}>\n                <div\n                    className={`marker-label-content zF`}>\n                    <div className=\"info-item\"><div className=\"img\"><img src={marker.UserPhoto} alt=\"user image\"/></div></div>\n                    <div className=\"info-item\">Category: <span className=\"info-item-value\">{marker.category}</span></div>\n                    <div className=\"info-item\">Likes: <span className=\"info-item-value\">{marker.likes}</span></div>\n                    <div className=\"info-item\">Dislikes: <span className=\"info-item-value\">{marker.dislikes}</span></div>\n                    <div className=\"info-item\">\n                        Link:\n                        <a\n                            href={marker.pageUrl}\n                            className={\"info-item-value link\"}>\n                            {marker.pageUrl}\n                        </a>\n                    </div>\n                    <div className=\"info-item\">Views: <span className=\"info-item-value\">{marker.views_count}</span></div>\n                    <div className=\"info-item\">Created: <span className=\"info-item-value\">{marker.createdHumanTiming}</span></div>\n                </div>\n            </MarkerWithLabel>\n        </>\n    )\n}\n\n\n// `https://gist.githubusercontent.com/farrrr/dfda7dd7fccfec5474d3/raw/758852bbc1979f6c4522ab4e92d1c92cba8fb0dc/data.json`\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -77.03639984,\n            \"lng\": 38.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": 23.03639984,\n            \"lng\": 45.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -1.03639984,\n            \"lng\": 33.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n    ]\n}\n","import axios from \"axios\";\n\nexport const getVideos = async() => {\n    let options = {\n        method: \"post\",\n        url: `https://api.social-media.in.ua/api/v1/getVideoByLocation.php `,\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer a22ade17030f9db1fe315d33f51bbb0d\"\n        },\n        data: {\n            \"zoom\": 4,\n            \"center\": {\n                \"lat\": -77.03639984,\n                \"lng\": 38.89509964\n            },\n            \"visible_area\": {\n                \"Qa\": {\n                    \"i\" : -180,\n                    \"j\" : -180\n                },\n                \"Va\": {\n                    \"i\" : -77.03639984,\n                    \"j\" : 38.89509964\n                }\n            }\n        }\n    };\n    const res = await axios(options);\n    return res\n};\n\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": \"-77.03639984\",\n            \"lng\": \"38.89509964\",\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n\n        }\n    ]\n}","import {Map} from \"./map\";\nimport React, {useEffect, useState} from \"react\";\nimport \"./app.sass\"\nimport {getVideos} from \"./servers/servers\";\n\nfunction App() {\n\n    const [videos, setVideos] = useState([]);\n\n    useEffect(() => {\n        getVideos().then(({data}={}) => setVideos(data.videos))\n    }, [])\n\n    if(!videos) return \"\";\n\n    return (\n        <div className=\"App\">\n            <Map videos = {videos}/>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport {BrowserRouter as Router} from 'react-router-dom';\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}