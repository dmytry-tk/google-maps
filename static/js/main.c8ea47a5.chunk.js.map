{"version":3,"sources":["map.js","servers/servers.js","app.js","index.js"],"names":["require","compose","withProps","withState","withHandlers","lifecycle","MarkerClusterer","withScriptjs","withGoogleMap","GoogleMap","MarkerWithLabel","StandaloneSearchBox","Map","googleMapURL","loadingElement","style","height","containerElement","mapElement","refs","map","undefined","onMapMounted","ref","onZoomChanged","onZoomChange","componentWillMount","this","setState","places","onSearchBoxMounted","searchBox","onPlacesChanged","getPlaces","props","CustomMap","useState","lat","lng","center","setCenter","refSearch","useRef","refMap","setRefMap","fetchVideos","getOptions","getCenter","zoom","getZoom","visible_area","getBounds","defaultCenter","onDragEnd","options","minZoom","maxZoom","data-standalone-searchbox","current","bounds","geometry","location","type","placeholder","boxSizing","position","zIndex","top","left","margin","transform","border","width","padding","borderRadius","boxShadow","fontSize","outline","textOverflow","averageCenter","clusterClass","gridSize","videos","video","ind","marker","CustomMarker","showLabel","setShowLabel","icon","url","UserPhoto","scaledSize","google","maps","Size","origin","Point","onMouseOut","onMouseOver","onClick","e","target","attributes","href","window","open","defaultClickable","defaultDraggable","clickable","labelClass","labelAnchor","className","src","alt","category","likes","dislikes","pageUrl","views_count","createdHumanTiming","getVideos","a","data","method","headers","axios","res","east","north","south","west","App","setVideos","useEffect","then","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c8ea47a5.chunk.js","sourcesContent":["/* eslint-disable no-undef */\n\nimport React, {useRef, useState} from \"react\";\n\nconst { compose, withProps, withState, withHandlers, lifecycle } = require(\"recompose\");\nconst { MarkerClusterer } = require(\"react-google-maps/lib/components/addons/MarkerClusterer\");\nconst {\n    withScriptjs,\n    withGoogleMap,\n    GoogleMap,\n} = require(\"react-google-maps\");\nconst { MarkerWithLabel } = require(\"react-google-maps/lib/components/addons/MarkerWithLabel\");\nconst { StandaloneSearchBox } = require(\"react-google-maps/lib/components/places/StandaloneSearchBox\");\n\nexport const Map = compose(\n    withProps({\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyA-gUZ12AVTL5DncTX_ilJAMhwCiocVvjg&v=3.exp&language=en&libraries=geometry,drawing,places\",\n        loadingElement: <div style={{ height: `100%` }} />,\n        containerElement: <div style={{ height: `100vh` }} />,\n        mapElement: <div style={{ height: `100%` }} />,\n    }),\n    withState('zoom', 'onZoomChange', 4),\n    withHandlers(() => {\n        const refs = {\n            map: undefined,\n        }\n\n        return {\n            onMapMounted: () => ref => {\n                refs.map = ref\n            },\n            onZoomChanged: ({ onZoomChange }) => () => {\n\n                // console.log(refs.map)\n                // onZoomChange(refs.map.getZoom())\n                // console.log(refs.map.getCenter().lat())\n                // console.log(refs.map.getCenter().lng())\n                // console.log(refs.map.getBounds())\n            },\n        }\n    }),\n    lifecycle({\n        componentWillMount() {\n            const refs = {}\n\n            this.setState({\n                places: [],\n                onSearchBoxMounted: ref => {\n                    refs.searchBox = ref;\n                },\n                onPlacesChanged: () => {\n                    const places = refs.searchBox.getPlaces();\n                    this.setState({\n                        places,\n                    });\n                },\n            })\n        },\n    }),\n    withScriptjs,\n    withGoogleMap\n)(props => <CustomMap {...props}/>);\n\nexport const CustomMap = (props) => {\n    const [center, setCenter] = useState({ lat: -33.91075134, lng: 151.19416809 })\n    const refSearch = useRef({getPlaces: () => {}})\n    const [refMap, setRefMap] = useState({})\n    const {fetchVideos} = props;\n\n    const changeCenter = () => {\n        const lat = refSearch.current.getPlaces()[0].geometry.location.lat()\n        const lng = refSearch.current.getPlaces()[0].geometry.location.lng()\n        fetchVideos(getOptions())\n        setCenter({lat, lng})\n    }\n    const onZoomChanged = () => {\n        fetchVideos(getOptions())\n    }\n\n    const getOptions = () => {\n        const lat = refMap.getCenter().lat();\n        const lng = refMap.getCenter().lng();\n        const zoom = refMap.getZoom()\n        const visible_area = refMap.getBounds()\n        return {zoom, center:{lat, lng}, visible_area}\n    }\n\n    return (\n        <GoogleMap\n            defaultCenter={{ lat: -33.91075134, lng: 151.19416809 }}\n            center={center}\n            zoom={props.zoom}\n            onDragEnd={() => fetchVideos(getOptions())}\n            options={{\n                minZoom: 2,\n                maxZoom: 18\n            }}\n            ref={setRefMap}\n            onZoomChanged={onZoomChanged}>\n            <div data-standalone-searchbox=\"\">\n                <StandaloneSearchBox\n                    ref={ref => {props.onSearchBoxMounted(ref); refSearch.current = ref}}\n                    bounds={props.bounds}\n                    onPlacesChanged={changeCenter}>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Enter your search term\"\n                        style={{\n                            boxSizing: `border-box`,\n                            position: `fixed`,\n                            zIndex: `100`,\n                            top: `0`,\n                            left: `50%`,\n                            margin: `10px`,\n                            transform: `translateX(-50%)`,\n                            border: `1px solid transparent`,\n                            width: `240px`,\n                            height: `32px`,\n                            padding: `0 12px`,\n                            borderRadius: `3px`,\n                            boxShadow: `0 2px 6px rgba(0, 0, 0, 0.3)`,\n                            fontSize: `14px`,\n                            outline: `none`,\n                            textOverflow: `ellipses`,\n                        }}\n                    />\n                </StandaloneSearchBox>\n            </div>\n            <MarkerClusterer\n                averageCenter\n                clusterClass={\"cluster-videos\"}\n                // enableRetinaIcons\n                gridSize={60}>\n                {\n                    props.videos.map((video, ind) => {\n                        return (\n                            <CustomMarker marker={video} key={ind}/>\n                        )\n                    })\n                }\n            </MarkerClusterer>\n        </GoogleMap>\n    )\n}\n\nexport const CustomMarker = ({marker}) => {\n\n    const [showLabel, setShowLabel] = useState(false);\n\n    const icon = {\n        url: marker.UserPhoto, // url\n        scaledSize: new google.maps.Size(40, 40), // scaled size\n        origin: new google.maps.Point(0, 0), // origin\n    };\n    return (\n        <>\n            <MarkerWithLabel\n                icon={icon}\n                zIndex={100}\n                onMouseOut={() => setShowLabel(false)}\n                onMouseOver={() => setShowLabel(true)}\n                onClick={(e) => {\n                    if(e?.target?.attributes?.href) window.open(\"e?.target?.attributes?.href?.value\", '_blank');\n\n                }}\n                defaultClickable={true}\n                defaultDraggable={true}\n                clickable={true}\n                labelClass={`marker-label ${showLabel? \"active\" : \"\"}`}\n                position={{lat: +marker.lat, lng: +marker.lng}}\n                labelAnchor={new google.maps.Point(110, -10)}>\n                <div\n                    className={`marker-label-content zF`}>\n                    <div className=\"info-item\"><div className=\"img\"><img src={marker.UserPhoto} alt=\"user image\"/></div></div>\n                    <div className=\"info-item\">Category: <span className=\"info-item-value\">{marker.category}</span></div>\n                    <div className=\"info-item\">Likes: <span className=\"info-item-value\">{marker.likes}</span></div>\n                    <div className=\"info-item\">Dislikes: <span className=\"info-item-value\">{marker.dislikes}</span></div>\n                    <div className=\"info-item\">\n                        Link:\n                        <span\n                            href={marker.pageUrl}\n                            className={\"info-item-value link\"}>\n                            Open Video\n                        </span>\n                    </div>\n                    <div className=\"info-item\">Views: <span className=\"info-item-value\">{marker.views_count}</span></div>\n                    <div className=\"info-item\">Created: <span className=\"info-item-value\">{marker.createdHumanTiming}</span></div>\n                </div>\n            </MarkerWithLabel>\n        </>\n    )\n}","import axios from \"axios\";\n\nexport const getVideos = async(data=defaultCenter) => {\n    let options = {\n        method: \"post\",\n        url: `https://api.social-media.in.ua/api/v1/getVideoByLocation.php `,\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer a22ade17030f9db1fe315d33f51bbb0d\"\n        },\n        data,\n    };\n    const res = await axios(options);\n    return res\n};\n\nconst defaultCenter = {\n    \"zoom\": 4,\n    \"center\": {\n        \"lat\": -77.03639984,\n        \"lng\": 38.89509964\n    },\n    \"visible_area\": {\n        east: 151.38488387979493,\n        north: -33.80019965154349,\n        south: -34.046054863759636,\n        west: 151.01066207803711,\n    }\n}\n\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": \"-77.03639984\",\n            \"lng\": \"38.89509964\",\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n\n        }\n    ]\n}","import {Map} from \"./map\";\nimport React, {useEffect, useState} from \"react\";\nimport \"./app.sass\"\nimport {getVideos} from \"./servers/servers\";\n\nfunction App() {\n\n    const [videos, setVideos] = useState([]);\n\n    useEffect(() => {\n        // if(process.env.NODE_ENV === \"development\") return setVideos(data.videos);\n        fetchVideos()\n    }, [])\n\n    const fetchVideos = (data) => {\n        getVideos(data).then(({data}={}) => setVideos(data.videos))\n    }\n\n    if(!videos) return \"\";\n\n    return (\n        <div className=\"App\">\n            <Map videos = {videos} fetchVideos={fetchVideos}/>\n        </div>\n    );\n}\n\nexport default App;\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -77.03639984,\n            \"lng\": 38.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": 23.03639984,\n            \"lng\": 45.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -1.03639984,\n            \"lng\": 33.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n    ]\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport App from \"./app\";\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}