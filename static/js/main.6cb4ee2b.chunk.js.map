{"version":3,"sources":["map.js","servers/servers.js","app.js","index.js"],"names":["require","compose","withProps","withState","withHandlers","lifecycle","MarkerClusterer","withScriptjs","withGoogleMap","GoogleMap","MarkerWithLabel","Marker","StandaloneSearchBox","SearchBox","Map","googleMapURL","loadingElement","style","height","containerElement","mapElement","refs","map","undefined","onMapMounted","ref","onZoomChanged","onZoomChange","componentWillMount","this","setState","places","onSearchBoxMounted","searchBox","onPlacesChanged","getPlaces","console","log","props","CustomMap","useState","lat","lng","center","setCenter","refSearch","useRef","defaultCenter","zoom","options","minZoom","maxZoom","data-standalone-searchbox","current","bounds","geometry","location","type","placeholder","boxSizing","border","width","padding","borderRadius","boxShadow","fontSize","outline","textOverflow","averageCenter","clusterClass","gridSize","videos","video","ind","marker","CustomMarker","showLabel","setShowLabel","icon","url","UserPhoto","scaledSize","google","maps","Size","origin","Point","zIndex","onMouseOut","onMouseOver","defaultClickable","onClick","defaultDraggable","clickable","labelClass","position","labelAnchor","className","src","alt","category","likes","dislikes","href","pageUrl","views_count","createdHumanTiming","getVideos","a","method","headers","data","axios","res","App","setVideos","useEffect","then","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6cb4ee2b.chunk.js","sourcesContent":["/* eslint-disable no-undef */\n\nimport React, {useEffect, useRef, useState} from \"react\";\n\nconst { compose, withProps, withState, withHandlers, lifecycle } = require(\"recompose\");\nconst { MarkerClusterer } = require(\"react-google-maps/lib/components/addons/MarkerClusterer\");\nconst {\n    withScriptjs,\n    withGoogleMap,\n    GoogleMap,\n    Marker\n} = require(\"react-google-maps\");\nconst { MarkerWithLabel } = require(\"react-google-maps/lib/components/addons/MarkerWithLabel\");\nconst { SearchBox } = require(\"react-google-maps/lib/components/places/SearchBox\");\nconst { StandaloneSearchBox } = require(\"react-google-maps/lib/components/places/StandaloneSearchBox\");\n\nconst getPixelPositionOffset = (width, height) => ({\n    x: -(width / 2),\n    y: -(height / 2),\n})\n\nexport const Map = compose(\n    withProps({\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyA-gUZ12AVTL5DncTX_ilJAMhwCiocVvjg&v=3.exp&libraries=geometry,drawing,places\",\n        loadingElement: <div style={{ height: `100%` }} />,\n        containerElement: <div style={{ height: `80vh` }} />,\n        mapElement: <div style={{ height: `100%` }} />,\n    }),\n    withState('zoom', 'onZoomChange', 13),\n    withHandlers(() => {\n        const refs = {\n            map: undefined,\n        }\n\n        return {\n            onMapMounted: () => ref => {\n                refs.map = ref\n            },\n            onZoomChanged: ({ onZoomChange }) => () => {\n\n                // console.log(refs.map)\n                // onZoomChange(refs.map.getZoom())\n                // console.log(refs.map.getCenter().lat())\n                // console.log(refs.map.getCenter().lng())\n                // console.log(refs.map.getBounds())\n            },\n        }\n    }),\n    lifecycle({\n        componentWillMount() {\n            const refs = {}\n\n            this.setState({\n                places: [],\n                onSearchBoxMounted: ref => {\n                    refs.searchBox = ref;\n                },\n                onPlacesChanged: () => {\n                    const places = refs.searchBox.getPlaces();\n                    console.log(refs.searchBox.getPlaces())\n                    this.setState({\n                        places,\n                    });\n                },\n            })\n        },\n    }),\n    withScriptjs,\n    withGoogleMap\n)(props => <CustomMap {...props}/>);\n\nexport const CustomMap = (props) => {\n    const [center, setCenter] = useState({ lat: -33.91075134, lng: 151.19416809 })\n    const refSearch = useRef({getPlaces: () => {}})\n\n    const changeCenter = () => {\n        const lat = refSearch.current.getPlaces()[0].geometry.location.lat()\n        const lng = refSearch.current.getPlaces()[0].geometry.location.lng()\n        setCenter({lat, lng})\n    }\n    return (\n        <GoogleMap\n            defaultCenter={{ lat: -33.91075134, lng: 151.19416809 }}\n            center={center}\n            zoom={props.zoom}\n            options={{\n                minZoom: 2,\n                maxZoom: 18\n            }}\n            ref={props.onMapMounted}\n            onZoomChanged={props.onZoomChanged}>\n            <div data-standalone-searchbox=\"\">\n                <StandaloneSearchBox\n                    ref={ref => {props.onSearchBoxMounted(ref); refSearch.current = ref}}\n                    bounds={props.bounds}\n                    onPlacesChanged={changeCenter}>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Customized your placeholder\"\n                        style={{\n                            boxSizing: `border-box`,\n                            border: `1px solid transparent`,\n                            width: `240px`,\n                            height: `32px`,\n                            padding: `0 12px`,\n                            borderRadius: `3px`,\n                            boxShadow: `0 2px 6px rgba(0, 0, 0, 0.3)`,\n                            fontSize: `14px`,\n                            outline: `none`,\n                            textOverflow: `ellipses`,\n                        }}\n                    />\n                </StandaloneSearchBox>\n            </div>\n            <MarkerClusterer\n                averageCenter\n                clusterClass={\"cluster-videos\"}\n                // enableRetinaIcons\n                gridSize={60}>\n                {\n                    props.videos.map((video, ind) => {\n                        return (\n                            <CustomMarker marker={video} key={ind}/>\n                        )\n                    })\n                }\n            </MarkerClusterer>\n        </GoogleMap>\n    )\n}\n\nexport const CustomMarker = ({marker}) => {\n\n    const [showLabel, setShowLabel] = useState(false);\n\n    const icon = {\n        url: marker.UserPhoto, // url\n        scaledSize: new google.maps.Size(40, 40), // scaled size\n        origin: new google.maps.Point(0, 0), // origin\n    };\n    return (\n        <>\n            <MarkerWithLabel\n                icon={icon}\n                zIndex={100}\n                onMouseOut={() => setShowLabel(false)}\n                onMouseOver={() => setShowLabel(true)}\n                defaultClickable={true}\n                onClick={(ref) =>  console.log(ref)}\n                defaultDraggable={true}\n                clickable={true}\n                labelClass={`marker-label ${showLabel? \"active\" : \"\"}`}\n                position={{lat: +marker.lat, lng: +marker.lng}}\n                labelAnchor={new google.maps.Point(110, -10)}>\n                <div\n                    className={`marker-label-content zF`}>\n                    <div className=\"info-item\"><div className=\"img\"><img src={marker.UserPhoto} alt=\"user image\"/></div></div>\n                    <div className=\"info-item\">Category: <span className=\"info-item-value\">{marker.category}</span></div>\n                    <div className=\"info-item\">Likes: <span className=\"info-item-value\">{marker.likes}</span></div>\n                    <div className=\"info-item\">Dislikes: <span className=\"info-item-value\">{marker.dislikes}</span></div>\n                    <div className=\"info-item\">\n                        Link:\n                        <a\n                            href={marker.pageUrl}\n                            className={\"info-item-value link\"}>\n                            {marker.pageUrl}\n                        </a>\n                    </div>\n                    <div className=\"info-item\">Views: <span className=\"info-item-value\">{marker.views_count}</span></div>\n                    <div className=\"info-item\">Created: <span className=\"info-item-value\">{marker.createdHumanTiming}</span></div>\n                </div>\n            </MarkerWithLabel>\n        </>\n    )\n}","import axios from \"axios\";\n\nexport const getVideos = async() => {\n    let options = {\n        method: \"post\",\n        url: `https://api.social-media.in.ua/api/v1/getVideoByLocation.php `,\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"Bearer a22ade17030f9db1fe315d33f51bbb0d\"\n        },\n        data: {\n            \"zoom\": 4,\n            \"center\": {\n                \"lat\": -77.03639984,\n                \"lng\": 38.89509964\n            },\n            \"visible_area\": {\n                \"Qa\": {\n                    \"i\" : -180,\n                    \"j\" : -180\n                },\n                \"Va\": {\n                    \"i\" : -77.03639984,\n                    \"j\" : 38.89509964\n                }\n            }\n        }\n    };\n    const res = await axios(options);\n    return res\n};\n\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": \"-77.03639984\",\n            \"lng\": \"38.89509964\",\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n\n        }\n    ]\n}","import {Map} from \"./map\";\nimport React, {useEffect, useState} from \"react\";\nimport \"./app.sass\"\nimport {getVideos} from \"./servers/servers\";\n\nfunction App() {\n\n    const [videos, setVideos] = useState([]);\n\n    useEffect(() => {\n        if(process.env.NODE_ENV === \"development\") return setVideos(data.videos);\n        getVideos().then(({data}={}) => setVideos(data.videos))\n    }, [])\n\n    if(!videos) return \"\";\n\n    return (\n        <div className=\"App\">\n            <Map videos = {videos}/>\n        </div>\n    );\n}\n\nexport default App;\n\nconst data = {\n    \"current\": null,\n    \"rowCount\": null,\n    \"total\": 7,\n    \"videos\": [\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -77.03639984,\n            \"lng\": 38.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": 23.03639984,\n            \"lng\": 45.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n        {\n            \"createdHumanTiming\": \"2 days\",\n            \"user\": \"admin\",\n            \"created\": \"2021-02-08 15:16:17\",\n            \"image\": \"https://api.social-media.in.ua/view/img/notfound.jpg\",\n            \"channelName\": \"support\",\n            \"first_name\": null,\n            \"last_name\": null,\n            \"description\": \"\",\n            \"views_count\": 6,\n            \"duration\": \"0:00:22\",\n            \"type\": \"video\",\n            \"lat\": -1.03639984,\n            \"lng\": 33.89509964,\n            \"category\": \"Default\",\n            \"likes\": 0,\n            \"dislikes\": 0,\n            \"pageUrl\": \"https://api.social-media.in.ua/video/nogpeajtottwumrc11mp4\",\n            \"videoUrl\": \"https://api.social-media.in.ua/videoEmbeded/nogpeajtottwumrc11mp4\",\n            \"UserPhoto\": \"https://api.social-media.in.ua/view/img/userSilhouette.jpg\"\n        },\n    ]\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport App from \"./app\";\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}